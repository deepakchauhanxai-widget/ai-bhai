<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Bhai ‚Äî AI Tools Library</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        .glass { 
            backdrop-filter: blur(12px); 
            background: rgba(255,255,255,0.07); 
            border: 1px solid rgba(255,255,255,0.12); 
        }
        .glow { 
            box-shadow: 0 0 30px rgba(0,255,255,0.25); 
        }
        .reveal { 
            max-height: 0; 
            overflow: hidden; 
            transition: max-height .35s ease; 
        }
        .reveal.open { 
            max-height: 500px; 
        }
        .chip { 
            border: 1px solid rgba(255,255,255,.2); 
        }
        .gradient-bg {
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0c4a6e 100%);
        }
    </style>
</head>
<body class="min-h-screen gradient-bg text-white">

    <!-- Language Indicator -->
    <div class="language-indicator fixed top-4 right-4 glass rounded-full px-3 py-1 text-sm z-50" id="languageIndicator">
        üåê Loading...
    </div>

    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent mb-4">
                AI Tools Library
            </h1>
            <p class="text-xl text-cyan-100/80 max-w-2xl mx-auto" id="pageSubtitle">
                Discover the best AI tools for every need
            </p>
        </div>

        <!-- Stats -->
        <div class="flex justify-center gap-6 mb-8 flex-wrap">
            <div class="glass rounded-xl px-6 py-4 text-center">
                <div class="text-2xl font-bold text-cyan-400" id="totalTools">0</div>
                <div class="text-cyan-100/70">Tools</div>
            </div>
            <div class="glass rounded-xl px-6 py-4 text-center">
                <div class="text-2xl font-bold text-cyan-400">7</div>
                <div class="text-cyan-100/70">Categories</div>
            </div>
            <div class="glass rounded-xl px-6 py-4 text-center">
                <div class="text-2xl font-bold text-cyan-400" id="activeFilters">0</div>
                <div class="text-cyan-100/70">Active Filters</div>
            </div>
        </div>

        <!-- Search & Filters -->
        <div class="glass glow rounded-2xl p-6 mb-8">
            <div class="flex flex-col md:flex-row gap-4 mb-4">
                <input type="text" id="searchInput" 
                       class="flex-1 px-4 py-3 rounded-xl bg-white/10 border border-white/20 focus:outline-none focus:ring-2 focus:ring-cyan-400/70 text-white placeholder-cyan-100/60"
                       placeholder="üîç Search AI tools...">
                
                <select id="categorySelect" 
                        class="px-4 py-3 rounded-xl bg-white/10 border border-white/20 focus:outline-none focus:ring-2 focus:ring-cyan-400/70 text-white">
                    <option value="all">üß© All Categories</option>
                    <option value="text">‚úçÔ∏è Text & Writing</option>
                    <option value="image">üé® Image & Design</option>
                    <option value="video">üé• Video</option>
                    <option value="voice">üé§ Voice & Audio</option>
                    <option value="business">üíº Business & Marketing</option>
                    <option value="coding">üë®‚Äçüíª Coding & Development</option>
                    <option value="utility">üß∞ Utility & Productivity</option>
                </select>
            </div>

            <!-- Quick Tags -->
            <div class="flex flex-wrap gap-2" id="quickTags">
                <!-- Tags will be loaded from JSON -->
            </div>
        </div>

        <!-- Tools Grid -->
        <div id="toolsContainer" class="mb-8">
            <div class="text-center py-12">
                <div class="loading-dots inline-flex gap-2">
                    <div class="w-3 h-3 bg-cyan-400 rounded-full animate-bounce"></div>
                    <div class="w-3 h-3 bg-cyan-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                    <div class="w-3 h-3 bg-cyan-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                </div>
                <p class="text-cyan-100/70 mt-4">Loading AI Tools...</p>
            </div>
        </div>

        <!-- Footer -->
        <footer class="glass rounded-2xl p-6 text-center">
            <p class="text-cyan-100/80" id="footerText">
                Made with ‚ù§Ô∏è by AI Bhai
            </p>
        </footer>
    </div>

    <script>
        // AI Tools Library System
        class AIToolsLibrary {
            constructor() {
                this.currentLanguage = 'en';
                this.pageData = null;
                this.filteredTools = [];
                this.baseURL = 'https://deepakchauhanxai.xyz/testing-dk/assets/ai-tools-library/';
                
                this.initializePage();
            }

            // Language detection
            syncWithWebsiteLanguage() {
                if (typeof window.getCurrentLanguage === 'function') {
                    return window.getCurrentLanguage();
                }
                
                const savedLang = localStorage.getItem('preferredLanguage');
                if (savedLang && ['en', 'hi', 'ur', 'mr'].includes(savedLang)) {
                    return savedLang;
                }
                
                return 'en';
            }

            // Fetch page data
            async fetchPageData(language) {
                try {
                    const timestamp = new Date().getTime();
                    const response = await fetch(`${this.baseURL}${language}.json?t=${timestamp}`);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    console.log(`Loaded AI Tools data for ${language}:`, data);
                    return data;
                } catch (error) {
                    console.error('Error fetching AI tools data:', error);
                    
                    // Fallback to English
                    if (language !== 'en') {
                        return this.fetchPageData('en');
                    }
                    
                    throw error;
                }
            }

            // Update page content
            updatePageContent() {
                if (!this.pageData) return;

                // Update titles and texts
                document.title = this.pageData.pageTitle;
                document.getElementById('pageSubtitle').textContent = this.pageData.pageSubtitle;
                document.getElementById('footerText').innerHTML = this.pageData.footerText;

                // Update search placeholder
                document.getElementById('searchInput').placeholder = this.pageData.searchPlaceholder;

                // Update category options
                const categorySelect = document.getElementById('categorySelect');
                categorySelect.innerHTML = `
                    <option value="all">${this.pageData.categoryAll}</option>
                    <option value="text">${this.pageData.categoryText}</option>
                    <option value="image">${this.pageData.categoryImage}</option>
                    <option value="video">${this.pageData.categoryVideo}</option>
                    <option value="voice">${this.pageData.categoryVoice}</option>
                    <option value="business">${this.pageData.categoryBusiness}</option>
                    <option value="coding">${this.pageData.categoryCoding}</option>
                    <option value="utility">${this.pageData.categoryUtility}</option>
                `;

                // Update quick tags
                const quickTagsContainer = document.getElementById('quickTags');
                quickTagsContainer.innerHTML = this.pageData.quickTags.map(tag => 
                    `<button class="px-3 py-1 rounded-full chip hover:bg-white/10 transition-colors" 
                            onclick="toolsLibrary.quickSearch('${tag.toLowerCase()}')">
                        #${tag}
                    </button>`
                ).join('');

                // Update stats
                document.getElementById('totalTools').textContent = this.pageData.tools.length;
            }

            // Get category icon
            getCategoryIcon(category) {
                const icons = {
                    'text': '‚úçÔ∏è',
                    'image': 'üé®',
                    'video': 'üé•',
                    'voice': 'üé§',
                    'business': 'üíº',
                    'coding': 'üë®‚Äçüíª',
                    'utility': 'üß∞'
                };
                return icons[category] || 'üß©';
            }

            // Render tools
            renderTools(tools = this.pageData?.tools || []) {
                const container = document.getElementById('toolsContainer');
                this.filteredTools = tools;

                if (!tools.length) {
                    container.innerHTML = `
                        <div class="glass rounded-2xl p-8 text-center">
                            <div class="text-2xl mb-2">üîç</div>
                            <h3 class="text-xl font-semibold mb-2">${this.pageData.noResultsTitle}</h3>
                            <p class="text-cyan-100/70">${this.pageData.noResultsText}</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        ${tools.map(tool => `
                            <div class="glass rounded-2xl glow hover:shadow-cyan-400/20 hover:scale-[1.02] transition-all duration-300">
                                <div class="p-5">
                                    <div class="flex items-start gap-3 mb-3">
                                        <div class="text-2xl">${tool.emoji}</div>
                                        <div class="flex-1 min-w-0">
                                            <h3 class="text-lg font-semibold truncate">${tool.name}</h3>
                                            <p class="text-sm text-cyan-100/80 mt-1 line-clamp-2">${tool.description}</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex flex-wrap gap-1 mb-3">
                                        <span class="px-2 py-1 rounded-full bg-cyan-500/20 text-cyan-300 text-xs border border-cyan-500/30">
                                            ${this.getCategoryIcon(tool.category)} ${tool.category}
                                        </span>
                                        ${tool.tags.slice(0, 3).map(tag => 
                                            `<span class="px-2 py-1 rounded-full bg-white/10 text-white/80 text-xs border border-white/20">
                                                #${tag}
                                            </span>`
                                        ).join('')}
                                    </div>
                                    
                                    <div class="flex gap-2">
                                        <a href="${tool.url}" target="_blank" rel="noopener nofollow" 
                                           class="flex-1 px-3 py-2 rounded-lg bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold text-center hover:from-cyan-600 hover:to-blue-600 transition">
                                            ${this.pageData.visitButton}
                                        </a>
                                        <button class="px-3 py-2 rounded-lg bg-white/10 border border-white/20 hover:bg-white/15 transition"
                                                onclick="toolsLibrary.toggleDetails('${tool.id}')">
                                            ${this.pageData.detailsButton}
                                        </button>
                                    </div>
                                    
                                    <div class="reveal mt-3" id="details-${tool.id}">
                                        <div class="rounded-xl bg-white/5 border border-white/15 p-3 text-sm">
                                            <p class="mb-2"><strong>${this.pageData.useCaseLabel}:</strong> ${tool.description}</p>
                                            <p class="mb-2"><strong>${this.pageData.categoryLabel}:</strong> ${this.getCategoryIcon(tool.category)} ${tool.category}</p>
                                            <p class="mb-1"><strong>${this.pageData.tagsLabel}:</strong></p>
                                            <div class="flex flex-wrap gap-1">
                                                ${tool.tags.map(tag => 
                                                    `<span class="px-2 py-1 rounded-full bg-white/10 text-white/80 text-xs">#${tag}</span>`
                                                ).join('')}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;

                // Update active filters count
                this.updateFiltersCount();
            }

            // Update filters count
            updateFiltersCount() {
                const searchValue = document.getElementById('searchInput').value;
                const categoryValue = document.getElementById('categorySelect').value;
                let activeCount = 0;
                if (searchValue) activeCount++;
                if (categoryValue !== 'all') activeCount++;
                document.getElementById('activeFilters').textContent = activeCount;
            }

            // Toggle tool details
            toggleDetails(toolId) {
                const detailsElement = document.getElementById(`details-${toolId}`);
                detailsElement.classList.toggle('open');
            }

            // Apply filters
            applyFilters() {
                if (!this.pageData) return;

                const searchQuery = document.getElementById('searchInput').value.toLowerCase().trim();
                const categoryFilter = document.getElementById('categorySelect').value;

                const filtered = this.pageData.tools.filter(tool => {
                    const matchesSearch = !searchQuery || 
                        tool.name.toLowerCase().includes(searchQuery) ||
                        tool.description.toLowerCase().includes(searchQuery) ||
                        tool.tags.some(tag => tag.toLowerCase().includes(searchQuery)) ||
                        tool.category.toLowerCase().includes(searchQuery);

                    const matchesCategory = categoryFilter === 'all' || tool.category === categoryFilter;

                    return matchesSearch && matchesCategory;
                });

                this.renderTools(filtered);
            }

            // Quick search with tag
            quickSearch(tag) {
                document.getElementById('searchInput').value = tag;
                this.applyFilters();
            }

            // Update language indicator
            updateLanguageIndicator() {
                const languageNames = {
                    'en': 'English üá∫üá∏',
                    'hi': 'Hindi üáÆüá≥', 
                    'ur': 'Urdu üáµüá∞',
                    'mr': 'Marathi üáÆüá≥'
                };
                document.getElementById('languageIndicator').textContent = 
                    `üåê ${languageNames[this.currentLanguage]}`;
            }

            // Language change handler
            async handleLanguageChange(newLanguage) {
                if (newLanguage !== this.currentLanguage) {
                    this.currentLanguage = newLanguage;
                    await this.loadPageData(newLanguage);
                    this.updatePageContent();
                    this.renderTools();
                    this.updateLanguageIndicator();
                }
            }

            // Load page data
            async loadPageData(language) {
                try {
                    this.pageData = await this.fetchPageData(language);
                } catch (error) {
                    console.error('Failed to load page data:', error);
                }
            }

            // Setup language listener
            setupLanguageListener() {
                // Listen for language change events
                document.addEventListener('languageChanged', (event) => {
                    this.handleLanguageChange(event.detail.language);
                });

                // Sync with website language periodically
                setInterval(() => {
                    const newLang = this.syncWithWebsiteLanguage();
                    if (newLang !== this.currentLanguage) {
                        this.handleLanguageChange(newLang);
                    }
                }, 1000);
            }

            // Initialize page
            async initializePage() {
                this.setupLanguageListener();
                
                // Set initial language
                this.currentLanguage = this.syncWithWebsiteLanguage();
                this.updateLanguageIndicator();
                
                // Load data and render
                await this.loadPageData(this.currentLanguage);
                this.updatePageContent();
                this.renderTools();

                // Setup event listeners
                document.getElementById('searchInput').addEventListener('input', () => this.applyFilters());
                document.getElementById('categorySelect').addEventListener('change', () => this.applyFilters());

                console.log('AI Tools Library initialized with language:', this.currentLanguage);
            }
        }

        // Initialize the application
        let toolsLibrary;

        document.addEventListener('DOMContentLoaded', () => {
            toolsLibrary = new AIToolsLibrary();
        });

        // Fallback initialization
        setTimeout(() => {
            if (!toolsLibrary) {
                toolsLibrary = new AIToolsLibrary();
            }
        }, 2000);
    </script>
</body>
</html>